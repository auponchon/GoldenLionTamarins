Descriptif traitements données GLT
Romain Monassier

Données :
Données d'observation avec composition des groupes (/ semaines) = clean.raw.data.long. Identifiant du GLT = "GLT" ou "Tattoo".
En + : données d'indiv translocalisés (tranlocated_ind) ; d'évènements de dispersion (GLT_movement, 1989-2001) ; de capture (processamento_mld, 1989-2009). 
2001-2007 = PDF
1989-2009 = capture
2009-2022 = Excel



*** CORRECTION DU SEXE
1) Mise à jour des erreurs de typographie (m, M0, S)
2) Correction du sexe :
* Cas de figure : individus qui ont une mention de sexe et un ou plusieurs mentions "NA"
Solution : implémenter le sexe majoritaire dans les cellules NA
* Cas de figure : plusieurs sexes différents
Solution : calculer la différence entre les mentions du sexe femelle et du sexe mâle. On considère qu'il y a erreur quand la différence est inférieure à 7. 
** On exporte et on vérifie manuellement les cas où la différence est inférieure à 7. Incertitudes sur LC4, OL16, PR15. Résultats : LC4 = F, les autres NA.
** On implémente le sexe majoritaire sinon et on vérifie que l'implémentatio est pertinente. Incertitudes sur RL11, RL13, SF3, SF4 et SK19 : GLT et tattoo diffèrent, régions/groupes différents, divergences données de capture/d'observation = plusieurs individus différents ?



*** CORRECTION DE L'AGE
Deux sources de données fiables : fichier de Valéria ("BirthDates.xlsx") et données issues de GLT_movement. 

I. Données 1989-2022
Données sources : Utilisation des données de naissance (fichier de Valéria : BirthDates.xlsx) (naissances de 1989 à 2001)
EXCEL :
- Création d'un champ BirthDMY au format texte et à partir de la colonne BirthDate
- Quand le jour n'est pas connu : utilisation de 01/
- Identification des doublons dans le fichier de Valéria : existence de doublons dont les données sont identiques : OL7 OL8 RV6 PT3 OL10 MA3 RV7 + T4 mais qui n'a pas de date de naissance renseignée
R : CF le script
1) Import des fichiers
2) Suppression des GLT dupliqués
3) Formater au format date dd/mm/YYYY


II. Données 2001-2022
1) Import des données : champ Birth de data.clean
2) Traitement dans R : modifier les erreurs de typo, formatter si besoin au format date

III. Jointure des deux datasets

IV. Correction
1) Vérifier les incohérences entre les deux jeux de données : différence entre les dates > 0 jour
* Si différence : attribuer la date du jeu de donnée de VR (BirthDates.xls)

2) Vérifier les incohérences entre les dates de naissance et les dates d'émigration, ie émigration avant la naissance
* Si erreur : attribuer NA, extraire les individus pour vérification
* Incertitudes sur 

3) Identifier les multiples dates
* Résumer les différentes dates de naissance renseignées
* Subset selon le nombre de dates (2, 3, 4 ou 5)
* NA si multiples dates hors erreurs évidentes (dates proches < 31 jours, erreurs de typo)

4) Vérifier les individus dont la date de naissance = la date de première observation : vérifier les groupes les mieux suivis (cf liste), croiser l'information avec le poids (> 400 g). 

5) Vérifier les dates de naissance des individus GLT nommés ?

6) Voir si le fichier de Valéria comprend les informations pour les individus incertains


V. Implémenter le champ Idade
Sachant que :
* IN, FN ou TO = Infant (jeune < 1 an) ; JU = juvénile ; SA = subadulte ; AD = adulte. On considère que JU < 1, SA = [1-3], AD = > 3.
Méthodes :
- à partir de la date de naissance
- à partir de la première date d'observation de juvénile (est né 1 ou 2 mois avant)