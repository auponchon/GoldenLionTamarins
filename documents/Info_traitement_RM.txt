Descriptif traitements données GLT
Romain Monassier

Données :
Données d'observation avec composition des groupes (/ semaines) = clean.raw.data.long. Identifiant du GLT = "GLT" ou "Tattoo".
En + : données d'indiv translocalisés (tranlocated_ind) ; d'évènements de dispersion (GLT_movement, 1989-2001) ; de capture (processamento_mld, 1989-2009). 
Format des données :
* 2001-2007 = PDF
* 2009-2022 = Excel



*** CORRECTION DU SEXE
1) Mise à jour des erreurs de typographie (m, M0, S)
2) Correction du sexe :
* Cas de figure : individus qui ont une mention de sexe et un ou plusieurs mentions "NA"
Solution : implémenter le sexe majoritaire dans les cellules NA
* Cas de figure : plusieurs sexes différents
Solution : calculer la différence entre les mentions du sexe femelle et du sexe mâle. On considère qu'il y a erreur quand la différence est inférieure à 7. 
On exporte et on vérifie au cas par cas
3) Vérification au cas par cas
Incertitudes sur les individus : RL11, RL13, SF3, SF4 et SK19

Corrections :
LC4 = F
O16 = NA
PR15 = NA
RL11 = NA
RL13 = NA
SF3 = NA
SF4 = NA
SK19 = NA


*** CORRECTION DE L'AGE
Deux sources de données : fichier de Valéria ("BirthDates.xlsx") et données issues de GLT_movement. 

I. Données 1989-2022
Données sources : Utilisation des données de naissance (fichier de Valéria : BirthDates.xlsx) (naissances de 1989 à 2001)
EXCEL :
- Création d'un champ Birth_VR au format texte et à partir de la colonne BirthDate
- Quand le jour n'est pas connu : utilisation de 01/
- Identification des doublons dans le fichier de Valéria : existence de doublons dont les données sont identiques : OL7 OL8 RV6 PT3 OL10 MA3 RV7 + T4 mais qui n'a pas de date de naissance renseignée
R : CF le script
1) Import des fichiers
2) Suppression des GLT dupliqués
3) Filtrer les NAs

II. Données 2001-2022
Import des données (.Rdata)
Traitement dans R
Champ "Birth" de data.clean (Birth_mov)

III. Jointure des deux jeux de données

IV. Verification des erreurs dans les dates de naissance
1) Incohérences entre les dates de naissance renseignées
* Si incohérence : garder la date de naissance issue de BirthDates (dates de naissance données par VR)

2) Erreurs du jeu de données GLT_movement
* Comparaison entre la date de naissance renseignée et la date d'émigration supposée
* Si erreur : extraction des individus à faire valider
* Incertitudes sur les individus 
A7 (deux dates d'émigration : 1993-01-01 et 1996-05-01 = on attribue 1996)
LB6 (deux dates de naissance : 1998-04-01 et 2001-07-01 = on attribue 1998)
CA9 = NA
SK19 = NA

3) Dates de naissances multiples
* NA, hors erreurs évidentes (dates proches < 180 jours, erreurs de typo)
* Deux dates différentes : incertitudes sur 56 individus
* Trois dates différentes : incertitudes sur 1375, AF20, KE10, SP23
* Cinq dates différentes : incertitudes sur FT, IN, TO


4) Vérifier les individus dont la date de naissance < la date de première observation : 
* Calcul de la différence
* Si la différence est négative : extraire les individus concernés
* Vérifier / attribuer NA

5) Vérifier les individus des mêmes groupes ayant la même date de naissance
* Pour les groupes les plus suivis uniquement (cf liste NB_obs_gp), croiser l'information avec le poids et le stade 
* Pour les groupes les moins suivis : NA

6) Individus vus pour la première fois adultes et ayant une date de naissance
* Mettre la date de naissance en NA

7) Vérifier les individus "?", chercher données dans le jeu de données de VR

V. Inférer le champ Idade sachant que :
* IN, FN ou TO = Infant (jeune < 1 an) ; JU = juvénile ; SA = subadulte ; AD = adulte. 
On considère que JU < 1, SA = [1-3], AD = > 3.
Méthodes :
1) à partir de la date de naissance 
2) à l'aide du poids : JU < 500 g et AD > 500 g
3) à l'aide du champ Idade existant

ERREURS :
1) Incohérences entre le stade et le poids (juvéniles > 500 g et adultes < 500 g) (n = 99 individus)
GLT
 1:   AF5 NA
 2:   AF6 NA
 3:  MP19 AD
 4:  MP29 AD
 5:  MP33 AD
 6:  MP34 AD
 7:  MP35 AD
 8:   PI4 OK
 9:   SK6 NA
10:   AR1 AD
11:   AR2 AD
12:   AR3 AD
13:   AX5 OK
14:   BB1 AD
15:   BB2 AD
16:   BB4 AD
17:   BI2 AD
18:   BI5 AD
19:   BR1 AD
20:   BV1 AD
21:   BV2 AD
22:   BV3 AD
23:   E34 AD
24:   EL1 AD
25:   EL2 AD
26:   FG1 AD
27:  IG10 AD
28:  IG12 AD
29:  IG13 AD
30:  IG16 AD
31:  IG17 AD
32:   IG3 AD
33:   IG8 AD
34:   IG9 AD
35:   IR1 AD
36:   IR2 AD
37:   JD1 AD
38:   JD5 AD
39:   JD9 AD
40:  JG12 AD sauf obs2721 (2002-05-01) = JU
41:   JO1 AD
42:   JO2 AD
43:   KL5 AD
44:   KL8 NA
45:   LS1 AD
46:   MB1 AD
47:   MB2 AD
48:   MB3 AD
49:   MB8 AD
50:   MB9 AD
51:   MD1 AD
52:  MP12 AD
53:  MP13 AD
54:   MP5 AD
55:   MP6 AD
56:   MP7 AD
57:   MP8 AD
58:   O38 AD à partir de 2003-11
59:   O39 AD
60:   O43 AD
61:   PJ1 AD
62:   PJ2 AD
63:   PR4 obs3654 == SA
64:   PS1 AD
65:   PS2 AD
66:   PS3 AD
67:   PV1 AD
68:  RT13 BirthOK == 2006-03-01
69:  RT14 BirthOK == 2006-03-01
70:  RT15 AD
71:  RT16 AD
72: RT2.1 AD
73:   RT6 AD
74:  RV14 OK mais approximatif
75:  RV15 OK mais approximatif
76:  RV34 AD
77:   SD1 AD
78:   SD3 AD
79:   SD4 AD
80:   SF3 AD
81:   SF4 AD à partir de 2004-04
82:   SF5 AD
83:   SF6 AD
84:   SF9 AD
85:  SH11 AD
86:  SH13 AD
87:  ST40 obs7431 == SA
88:  ST49 NA
89:  TR31 AD
90:  TR32 AD
91:   VC1 AD
92:  VC10 AD
93:  VC11 AD
94:  VC17 AD
95:   VC8 AD
96:   VC9 AD
97:  WS41 AD
98:  WS42 AD
99:  WS44 AD
ET passer leur BirthOK en NA

2) Incohérences chronologiques (eg adulte qui passe juvénile) (n = 295)
  1 ?    NA
  2 1267 AD à partir de ObsOrder == 2
  3 AF1  AD à partir de ObsOrder == 7
  4 AF11 AD à partir de ObsOrder == 4
  5 AF13 2010-01-18 == SA
  6 AF2  2005-01-13 == SA
  7 AF3  AD à partir de ObsOrder == 6
  8 AF4  AD à partir de ObsOrder == 6
  9 AF8  AD à partir de ObsOrder == 5
 10 AL1  AD à partir de ObsOrder == 2
 11 AR4  2004-08-04 == SA, 2004-04-01 == SA, 2004-06-01 == SA
 12 AS1  1992-09-14 == NA
 13 AS10 2002-06-01 == SA
 14 AS14 2002-05-01 == JU, 2003-07-18 == SA
 15 AS4  2000-08-23 == SA, 2001-07-05 == SA
 16 AS5  2001-09-01 == AD
 17 AT8  2004-06-03 == SA
 18 AT9  2004-06-03 == SA
 19 AX12 2006-03-02 == SA
 20 AX13 2007-03-28 == SA
 21 AX14 2007-03-28 == SA
 22 AX15 NA
 23 AX19 2008-05-27 == SA
 24 AX20 AD à partir de ObsOrder == 3 (2009-03-01)
 25 AX21 AD à partir de ObsOrder == 3 (2009-03-01)
 26 AX5  2004-05-21 == SA
 27 BE1  2004-01-19 == SA
 28 BE2  AD à partir de ObsOrder == 12
 29 BE5  2007-03-01 == AD, 2007-05-01 == AD
 30 BE6  AD à partir de ObsOrder == 6
 31 BI1  NA
 32 CA18 2000-06-30 == SA
 33 CA19 2001-07-11 == SA
 34 DI2  AD
 35 DN1  2004-07-18 == SA, 2004-09-15 == SA
 36 DN2  2004-09-15 == SA
 37 E12  1997-03-04 == SA
 38 E24  2003-07-10 == SA
 39 E25  AD à partir de 2003-07-10
 40 E27  AD à partir de 2004-04-01
 41 E28  AD à partir de 2005-01-01
 42 E30  AD à partir de 2005-01-01
 43 E35  AD à partir de 2008-08-16
 44 FX3  AD à partir de 2004-03-17
 45 FX4  AD à partir de 2004-03-17
 46 GM3  AD à partir de 2006-07-11
 47 GM4  AD à partir de 2006-07-11
 48 GM5  AD à partir de 2006-07-11
 49 IG1  AD à partir de 2004-01-21
 50 IG2  AD à partir de 2004-01-21
 51 IG5  AD à partir de 2007-03-01
 52 IP1  AD
 53 JG10 2002-03-25 == SA, 2003-01-21 == SA
 54 JG17 2004-11-01 == JU
 55 JG2  AD
 56 JG6  AD
 57 JG7  AD à partir de 2002-03-26
 58 JG8  2002-03-26 == SA, 2003-01-08 == SA
 59 JP10 AD à partir de 2009-07-01
 60 JP12 AD à partir de 2009-07-01
 61 JP13 AD à partir de 2009-07-01
 62 JP14 AD à partir de 2009-07-01
 63 JP3  AD à partir de 2005-01-01
 64 JP4  2005-06-13 == SA
 65 JP5  AD à partir de 2007-03-01
 66 JP6  AD à partir de 2007-03-01
 67 JP7  AD
 68 JP8  AD
 69 JP9  AD à partir de 2008-05-28
 70 KE14 AD à partir de 2006-07-05
 71 KE15 AD à partir de 2006-07-05
 72 KE16 AD à partir de 2006-07-15
 73 KE5  AD
 74 KE6  AD
 75 KE8  2004-07-27 == SA
 76 LA34 2001-09-01 == AD
 77 LA42 AD à partir de 2004-07-01
 78 LA43 2004-09-20 == SA
 79 LC20 AD à partir de 2001-07-31
 80 LC22 AD
 81 LC24 AD à partir de 2001-07-31
 82 LC30 AD
 83 MA11 AD à partir de 1998-06-22
 84 MA14 AD
 85 MA15 AD
 86 MA28 AD à partir de 2004-04-01
 87 MA37 AD à partir de 2008-08-30
 88 MA9  NA
 89 MC9  AD
 90 MD2  AD
 91 MF2  NA
 92 MK13 2003-10-01 == AD
 93 MK14 2003-10-01 == AD
 94 MK5  AD à partir de 1999-04-12
 95 MP242 NA
 96 MP243 NA
 97 MP244 NA
 98 MP245 NA
 99 MP302 NA
100 MP303 NA
101 MP304
102 MP305
103 MP306
104 MP307
105 MP452
106 MP453
107 NC1  
108 O30  
109 O33  
110 O37  
111 O38  
112 O41  
113 O42  
114 OL10 
115 OL11 
116 OL12 
117 OL15 
118 OL16 
119 OL18 
120 OL19 
121 OL23 
122 OL27 
123 OL7  
124 OL8  
125 OL9  
126 PA3  
127 PA4  
128 PA5  
129 PI11 
130 PI12 
131 PI14 
132 PI15 
133 PI2  
134 PI4  
135 PI6  
136 PR2  
137 PR9  
138 PT10 
139 PT6  
140 RL11 
141 RL13 
142 RL15 
143 RL16 
144 RL23 
145 RP2  
146 RT12 
147 RT19 
148 RT4  
149 RV10 
150 RV12 
151 RV17 
152 RV18 
153 RV2  
154 RV25 
155 RV26 
156 RV27 
157 RV31 
158 RV35 
159 SE5  
160 SF1  
161 SH1  
162 SH10 
163 SH4  
164 SH5  
165 SH6  
166 SH7  
167 SH8  
168 SH9  
169 SI2  
170 SI6  
171 SI7  
172 SI8  
173 SP12 
174 SP2  
175 SP4  
176 SP6  
177 SP8  
178 SP9  
179 ST10 
180 ST12 
181 ST29 
182 ST32 
183 ST34 
184 ST35 
185 ST41 
186 ST44 
187 T0   
188 TM1  
189 TM2  
190 TM3  
191 TM5  
192 TR12 
193 TR13 
194 TR17 
195 TR18 
196 TR2  
197 TR20 
198 TR21 
199 TR34 
200 TR36 
201 TR37 
202 TR38 
203 TR4  
204 TR6  
205 W26  
206 W6   
* Pour ces individus : BirthDate == NA


V. Regarder les GLT qui n'ont ni Idade ni BirthDate
- en regardant les fichiers source de 2001 à 2009 pour les 15 groupes les plus suivis (individus en fin de bloc)

VI. Résumé statistique
- Histogramme des poids
- Individus qui ont un sexe/stade renseigné (ou pas)