Descriptif traitements données GLT
Romain Monassier

Données :
Données d'observation avec composition des groupes (/ semaines) = clean.raw.data.long. Identifiant du GLT = "GLT" ou "Tattoo".
En + : données d'indiv translocalisés (tranlocated_ind) ; d'évènements de dispersion (GLT_movement, 1989-2001) ; de capture (processamento_mld, 1989-2009). 
Format des données :
* 2001-2007 = PDF
* 2009-2022 = Excel



*** CORRECTION DU SEXE
1) Mise à jour des erreurs de typographie (m, M0, S)
2) Correction du sexe :
* Cas de figure : individus qui ont une mention de sexe et un ou plusieurs mentions "NA"
Solution : implémenter le sexe majoritaire dans les cellules NA
* Cas de figure : plusieurs sexes différents
Solution : calculer la différence entre les mentions du sexe femelle et du sexe mâle. On considère qu'il y a erreur quand la différence est inférieure à 7. 
On exporte et on vérifie au cas par cas
3) Vérification au cas par cas
Incertitudes sur les individus : RL11, RL13, SF3, SF4 et SK19

Corrections :
LC4 = F
O16 = NA
PR15 = NA
RL11 = NA
RL13 = NA
SF3 = NA
SF4 = NA
SK19 = NA


*** CORRECTION DE L'AGE
Deux sources de données fiables : fichier de Valéria ("BirthDates.xlsx") et données issues de GLT_movement. 

I. Données 1989-2022
Données sources : Utilisation des données de naissance (fichier de Valéria : BirthDates.xlsx) (naissances de 1989 à 2001)
EXCEL :
- Création d'un champ Birth_VR au format texte et à partir de la colonne BirthDate
- Quand le jour n'est pas connu : utilisation de 01/
- Identification des doublons dans le fichier de Valéria : existence de doublons dont les données sont identiques : OL7 OL8 RV6 PT3 OL10 MA3 RV7 + T4 mais qui n'a pas de date de naissance renseignée
R : CF le script
1) Import des fichiers
2) Suppression des GLT dupliqués
3) Filtrer les NAs

II. Données 2001-2022
Import des données (.Rdata)
Traitement dans R
Champ "Birth" de data.clean

III. Jointure des deux jeux de données

IV. Verification des erreurs
1) Incohérences entre les dates de naissance renseignées
* Si incohérence : garder la date de naissance issue de BirthDates (dates de naissance données par VR)

2) Erreurs du jeu de données GLT_movement
* Comparaison entre la date de naissance renseignée et la date d'émigration supposée
* Si erreur : extraction des individus à faire valider
* Incertitudes sur les individus 
A7 (deux dates d'émigration : 1993-01-01 et 1996-05-01 = on attribue 1996)
CA9
LB6 (deux dates de naissance : 1998-04-01 et 2001-07-01 = on attribue 1998)
SK19

3) Dates de naissances multiples
* NA, hors erreurs évidentes (dates proches < 180 jours, erreurs de typo)
* Deux dates différentes : incertitudes sur 56 individus
* Trois dates différentes : incertitudes sur 1375, AF20, KE10, SP23
* Cinq dates différentes : incertitudes sur FT, IN, TO


4) Vérifier les individus dont la date de naissance = la date d'observation : 
* Calcul de la différence
* Si la différence est négative : extraire les individus concernés
* Vérifier / attribuer NA

5) Vérifier les individus des mêmes groupes ayant la même date de naissance
* Pour les groupes les plus suivis uniquement (cf liste NB_obs_gp), croiser l'information avec le poids (> 400 g). * Pour les groupes les moins suivis : NA

6) Individus vus pour la première fois adultes et ayant une date de naissance
* Mettre la date de naissance en NA

7) Vérifier les individus "?", chercher données dans le jeu de données de VR

V. Inférer le champ Idade sachant que :
* IN, FN ou TO = Infant (jeune < 1 an) ; JU = juvénile ; SA = subadulte ; AD = adulte. On considère que JU < 1, SA = [1-3], AD = > 3.
Méthodes :
- à partir de la date de naissance
- à partir de la première date d'observation de juvénile (né 3 mois avant)
- en regardant les fichiers source de 2001 à 2009 pour les 15 groupes les plus suivis (individus en fin de bloc)